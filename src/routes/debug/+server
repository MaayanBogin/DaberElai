import { json } from '@sveltejs/kit';
import type { RequestHandler } from './$types';
import { PRIVATE_BEAM_API_URL, PRIVATE_BEAM_API_KEY } from '$env/static/private';

export const GET: RequestHandler = async () => {
  return json({
    hasApiUrl: !!PRIVATE_BEAM_API_URL,
    hasApiKey: !!PRIVATE_BEAM_API_KEY,
    apiUrlPreview: PRIVATE_BEAM_API_URL ? `${PRIVATE_BEAM_API_URL.slice(0, 20)}...` : 'undefined',
    apiKeyPreview: PRIVATE_BEAM_API_KEY ? `${PRIVATE_BEAM_API_KEY.slice(0, 6)}...` : 'undefined',
    nodeEnv: process.env.NODE_ENV,
    // Show all env vars that start with PRIVATE_ (for debugging)
    allPrivateVars: Object.keys(process.env).filter(key => key.startsWith('PRIVATE_'))
  });
};